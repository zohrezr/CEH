$\color{#b91646}{\textsf{SMTP}}$
=================================

- **Simple Mail Transfer Protocol**
- **Email addresses are everywhere: site, cards**

بخشی از enumeration به دست آوردن ایمیل های کسایی است که توی اون سرور هستن.
______________
- **POP3 110/995, IMAP 143/993, SMTP 25**

ایمیل قدیمی SMTP بود که بعد پروتکل های بعدی مثل POP3 و IMAP اومدن.

توی SMTP فقط وصل می شدی می گفتی من ایمیل دارم یا نه. وصل می شدیم می گفتیم ایمیل بفرست و ...

توی POP3 اجازه میده شما وصل بشی، همه ی ایمیل هارو بگیری و بفرستی و ...

توی IMAP اینو اضافه کرده که می تونید ایمیل هاتون توی چندجا synchronize داشته باشن.

توی POP3 اگر یه ایمیل رو گرفتید توی یه دستگاه دیگه یا نیست یا خونده شده یا نخونده شده دیده می شه (sink نیست).

تمرکز روی SMTP است چون هم ساده تر است و هم دنبال enumeration است.
________________________________
- **If thre is no such user, we will get back an email ;) with its headers and info**


هدف اصلی اینه که userهایی که توی ایمیل هستن رو پیدا کنیم.

ایده -> یه ایمیل بزنی به یه سازمان، ترجیحا ایمیل chertopert@company.com که برگشت بخوره.

اگر ایمیل برگشت نخوره، مطمئن نیستید که این ایمیل نبوده که برگشت نخورده، به یکی رسیده یا اینکه سیستمشون برگشت نمی زنه.

اگر ایمیل چرت و پرت بزنیم و برگشت بخوره -> هم توی هدر ایمیل برگشتی یکسری اطلاعات داریم و هم می فهمیم اگر ایمیلی نباشه برگشت می خوره در نتیجه می تونیم چک کنیم چه ایمیل هایی هست.

نمی خوایم به همه ایمیل بزنیم ببینیم هستن یا نه -> پس میریم سراغ SMTP
___________
- **telnet <server> 25**
- **Search for SMTP commands** -> SMTP examples

(specially VRFY jadi, or EXPN jadi to check if a list of users are active on the server)

باید بتونی دسترسی پیدا کنی به SMTP server یک سازمان که بتونی اینارو چک کنی.

دستورات زیادی داره مثلا:

`VRFY` -> verify

چک کنه این user رو داره یا نه

`EXPN`


تایید می کنه Identity یک mailing list رو. -> واسه چند نفرو چک می کنه.
____________
- **smtp-user-enum**

برنامه ای که enumeration از طریق SMTP رو انجام میده.

_________________
- **Problem with open SMTP relays**

تنطیم می تونیم بکنیم که SMTP server بتونه lookup کنه و ببینه از IP که یکی وصل می شه واقعا همونی هست که باید یا نه مثلا فلانن IP برای User1@company.com است. -> مطمئن شه همون کاربر وصل شده.

خیلی از سرورها اینو چک نمی کنن درنتیجه  شما می تونی از هر آدرسی ایمیل بزنی از طریق اون سرویس های default که باعث می شه mail server میره تو spam.
